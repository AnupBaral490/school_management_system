<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Student Management System{% endblock %}</title>

    {% load static %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>

{% if user.is_authenticated %}
<div class="layout-wrapper">

    <!-- ================= Sidebar ================= -->
    <aside class="sidebar">
        <div class="sidebar-brand">
            <i class="fas fa-graduation-cap"></i>
            <span>SMS</span>
        </div>

        <ul class="sidebar-menu">
            <li>
                <a href="{% url 'accounts:dashboard' %}">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a>
            </li>

            {% if user.user_type == 'admin' %}
            <li>
                <a href="{% url 'accounts:admin_user_list' %}">
                    <i class="fas fa-users"></i> User Management
                </a>
            </li>
            <li>
                <a href="{% url 'academic:department_list' %}">
                    <i class="fas fa-book"></i> Academic
                </a>
            </li>
            {% endif %}

            {% if user.user_type == 'teacher' or user.user_type == 'admin' %}
            <li>
                <a href="{% url 'attendance:mark_attendance' %}">
                    <i class="fas fa-check-circle"></i> Attendance
                </a>
            </li>
            <li>
                <a href="{% url 'academic:assignment_list' %}">
                    <i class="fas fa-tasks"></i> Assignments
                </a>
            </li>
            <li>
                <a href="{% url 'examination:exam_list' %}">
                    <i class="fas fa-clipboard-list"></i> Exams
                </a>
            </li>
            {% endif %}

            {% if user.user_type == 'student' %}
            <li>
                <a href="{% url 'attendance:view_attendance' %}">
                    <i class="fas fa-calendar-check"></i> Attendance
                </a>
            </li>
            <li>
                <a href="{% url 'academic:student_assignments' %}">
                    <i class="fas fa-tasks"></i> Assignments
                </a>
            </li>
            <li>
                <a href="{% url 'examination:result_list' %}">
                    <i class="fas fa-chart-bar"></i> Results
                </a>
            </li>
            {% endif %}

            <li>
                <a href="{% url 'notifications:notification_list' %}">
                    <i class="fas fa-bell"></i> Notifications
                </a>
            </li>

            <li class="sidebar-divider"></li>

            <li>
                <a href="{% url 'accounts:profile' %}">
                    <i class="fas fa-user"></i> Profile
                </a>
            </li>
            <li>
                <a href="{% url 'accounts:logout' %}" class="logout">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </li>
        </ul>
    </aside>

    <!-- ================= Main Content ================= -->
    <main class="main-content">
{% else %}
    <main class="container-fluid mt-4">
{% endif %}

        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            {% endfor %}
        {% endif %}

        {% block content %}{% endblock %}

    </main>

{% if user.is_authenticated %}
</div>
{% endif %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
{% block extra_js %}{% endblock %}
</body>
</html>
